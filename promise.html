<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
</html>

<script>
  // ************************************************************************

  // what is promise ?

  // "I Promise a Result!"

  // "Producing code" is code that can take some time

  // "Consuming code" is code that must wait for the result

  // A Promise is a JavaScript object that links producing code and consuming

  // let pro = new Promise((resolve, reject) => {
  //   let sanjay = false;

  //   if (sanjay) {
  //     resolve();
  //   } else {
  //     reject("Error:something gonna wrong");
  //   }
  // });

  // pro
  //   .then(() => {
  //     console.log("your promise is full fill");
  //   })
  //   .catch((err) => {
  //     console.log(err);
  //   });

  // ************************************************************************
  // Implement the code as per the youtuber

  // Promies all

  // const arr1 = Promise.resolve("hellow sanjay");

  // const arr = 10;

  // const arr2 = new Promise((resolve, reject) =>
  //   setTimeout(resolve, 2000, "goodbye")
  // );

  // const arr4 = fetch("https://jsonplaceholder.typicode.com/users").then((res) =>
  //   res.json()
  // );

  // Promise.all([arr1, arr, arr2, arr4]).then((value) => {
  //   console.log(value);
  // });

  // *
  // *
  // * *
  // * *
  // * *
  // * *

  // ************************************************************************

  // Async await

  // async function fetchuser() {
  //   let res = await fetch("https://jsonplaceholder.typicode.com/users");

  //   let data = await res.json();

  //   console.log(data);
  // }

  // fetchuser();

  // ***********************************************************************************
  // Make a new function call create4thPost for adding one more new post "Post Four".
  //  create4thPost should take createPost as a callback function. Once the post is created all the 4 posts should be displayed too.

  // const post = [
  //   { title: "post one", body: "this is first post" },
  //   { title: "post two", body: "this is two post" },
  //   { title: "post three", body: "this is three post" },
  //   { title: "post four", body: "this is four post" },
  // ];

  //  callbacks use here

  // function callbacks_post() {
  //   setTimeout(() => {
  //     var output = "";

  //     post.forEach((post, index) => {
  //       output += `<li>${post.title}</li>`;
  //       // output += `<li>${post.body}</li>`;
  //     });

  //     document.body.innerHTML = output;
  //   }, 1000);
  // }
  // // callbacks_post();

  // function createonepost(store, callback) {
  //   setTimeout(() => {
  //     post.push(store);
  //     callback();
  //   }, 2000);
  // }
  // createonepost(
  //   { title: "post five", body: "this is post five" },
  //   callbacks_post
  // );

  // ***********************************************************************************

  // practice only here
  const arr = [
    { title: "first post", body: "this is first post" },
    { title: "second post", body: "this is second post" },
    { title: "third post", body: "this is third post" },
    { title: "fourth post", body: "this is fourth post" },
  ];

  function callbackPost() {
    setTimeout(() => {
      let output = " ";

      arr.forEach((post, index) => {
        output += `<h1>${post.title}</h1>`;
      });

      document.body.innerHTML = output;
    }, 1000);
  }

  // callbackPost()

  function create_new(store) {
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        arr.push(store);

        const error = false;

        if (error) {
          resolve();
        } else {
          reject("Error : something went wrong");
        }
      }, 2000);
    });
  }

  create_new(
    { title: "fifth post", body: "this is fifth post" }).then(callbackPost).catch((err)=>{
      console.log(err)
    })
  
</script>
